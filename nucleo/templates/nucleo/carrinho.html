{% extends 'nucleo/base.html' %}

{% block title %}Meu Carrinho - NerdHub{% endblock %}

{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/style_carrinho.css' %}">
<div class="carrinho-container">
    <h1>ðŸ›’ Meu Carrinho</h1>

    {% if itens_com_total %}
        <div class="carrinho-conteudo">
            <!-- Coluna dos Itens -->
            <div class="carrinho-itens">
                {% for item_com_total in itens_com_total %}
                    <div class="carrinho-item">
                        <div class="item-imagem">
                            <img src="{{ item_com_total.item.produto.imagem_principal.url }}" alt="{{ item_com_total.item.produto.nome }}">
                        </div>
                        <div class="item-detalhes">
                            <h3>{{ item_com_total.item.produto.nome }}</h3>
                            <p class="item-preco">R$ {{ item_com_total.item.produto.preco|floatformat:2 }}</p>
                        </div>
                        <div class="item-quantidade">
                            <span>Quantidade: {{ item_com_total.item.quantidade }}</span>
                        </div>
                        <div class="item-total">
                            <p>R$ {{ item_com_total.total|floatformat:2 }}</p>
                        </div>
                        <div class="item-acao">
                            <a href="{% url 'nucleo:remover_item_carrinho' item_com_total.item.id %}" class="btn-remover">Remover</a>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        <!-- Coluna do Resumo -->
        <div class="carrinho-resumo">
            <div class="resumo-card">
                <h3>Resumo do Pedido</h3>
                <div class="resumo-linha">
                    <span>Total:</span>
                    <span class="resumo-total">R$ {{ total|floatformat:2 }}</span>
                </div>
                <a href="{% url 'nucleo:finalizar_pedido' %}" class="btn-finalizar">Finalizar Pedido</a>
                <a href="{% url 'nucleo:index' %}" class="btn-continuar">Continuar Comprando</a>
            </div>
        </div>
    {% else %}
        <div class="carrinho-vazio">
            <p>Seu carrinho estÃ¡ vazio ðŸ˜¢</p>
            <a href="{% url 'nucleo:index' %}" class="btn-voltar">Voltar para a loja</a>
        </div>
    {% endif %}
</div>

{% endblock %}